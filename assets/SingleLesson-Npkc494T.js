import{r as d,a3 as f,j as s,a4 as j,a5 as x,a6 as y,a7 as b,Q as p,a8 as h,a9 as m,aa as g,L as v,ab as N,$ as w,a2 as L,V as P,ac as u,ad as c}from"./index-BJ9f2vcr.js";import{G as O}from"./group-AejWIf7d.js";const k=d.forwardRef(function(t,a){const e=f({key:"button"}),[n,i]=d.useMemo(()=>e.splitVariantProps(t),[t,e]);return s.jsx(j,{value:n,children:s.jsx(O,{ref:a,...i})})});function B(r){const{setPlayerOptions:t,playerOptions:a,data:e}=r,n=o=>{t(l=>({...l,[o]:!l[o]}))},i=new Date(e?.scheduledDate).toLocaleDateString("en-GB");return s.jsxs("div",{className:"flex flex-col bg-bg-gray border border-secondary/40 rounded-xl overflow-hidden h-full",children:[s.jsx("div",{className:"aspect-video w-full min-h-[60dvh] max-h-[60dvh]",children:e?.video?s.jsx("iframe",{src:e.video.replace("watch?v=","embed/"),title:e.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(x,{})})}),s.jsxs("div",{className:"space-y-4 mt-1 flex justify-between",children:[s.jsx(k,{attached:!0,children:G.map(({label:o,icon:l})=>s.jsxs(p,{variant:"surface",textTransform:"capitalize",onClick:()=>n(o),bg:a[o]?"gray.500":"",children:[s.jsx(l,{})," ",o]},o))}),s.jsxs("p",{className:"pe-2 space-x-2",children:[s.jsx("span",{className:"font-semibold",children:" Published Data:"}),s.jsx("span",{className:" text-secondary",children:i})]})]}),s.jsx("div",{className:"p-4 text-secondary",children:e?.description?s.jsx("p",{children:e?.description}):s.jsx(h,{noOfLines:1})})]})}const G=[{label:"expand",icon:y},{label:"focus",icon:b}];function C(){const{lessonId:r}=m(),{lessonsOwned:t,isLoading:a}=g();return s.jsxs("div",{className:"rounded-xl border-secondary/40 border bg-bg-gray overflow-hidden h-full",children:[s.jsx("h1",{className:"p-4 text-center font-bold bg-bg-gray",children:"Lessons Owned"}),s.jsx("div",{children:a?s.jsx("div",{className:"mt-10",children:s.jsx(x,{})}):t.map(({title:e,_id:n})=>s.jsx(p,{asChild:!0,variant:r===n?"solid":"outline",className:"w-full !justify-between !py-6",children:s.jsxs(v,{to:"/lessons/"+n,children:[s.jsx(N,{className:"p-[1px]"})," ",e]})},n))})]})}function S(){const{lessonId:r}=m(),{error:t,data:a}=w(r),[e,n]=d.useState({expand:!1,focus:!1});return t?s.jsx(L,{}):s.jsxs(s.Fragment,{children:[s.jsxs(P,{className:"!space-y-10",children:[s.jsx("h1",{className:"lg:text-3xl text-xl font-bold rounded-xl bg-bg-gray px-2",children:a?.data?a.data.title:s.jsx(h,{noOfLines:1})}),s.jsx("div",{className:"grid grid-cols-4 gap-4 min-h-[70vh] relative",children:s.jsxs(u,{mode:"popLayout",children:[s.jsx(c.div,{layout:!0,className:`z-50 h-full ${e.expand?"col-span-4":"col-span-3"}`,transition:{duration:.3},children:s.jsx(B,{playerOptions:e,setPlayerOptions:n,...a})},"player"),!e.expand&&s.jsx(c.div,{layout:!0,transition:{duration:.3},className:"col-span-1 overflow-hidden",children:s.jsx(C,{})},"lesson-list")]})})]}),s.jsx(u,{mode:"wait",children:s.jsx(c.div,{initial:{display:"none",opacity:0},animate:{display:e.focus?"block":"none",opacity:e.focus?1:0},exit:{display:e.focus?"none":"block",opacity:e.focus?0:1},className:"bg-bg-gray backdrop-blur-md inset-0 absolute z-10"})})]})}export{S as default};
