import{M as j,r as h,j as e,ah as f,aD as C,aE as P,aF as y,Q as c,aG as S,aH as D,V as M,aI as U,aJ as u,aK as F}from"./index-BJ9f2vcr.js";import{d as I,o as v,s as x,b as G,e as L,A,a as T,p}from"./inputs_data_type-iUjDXfi-.js";import{M as b}from"./Modal-CUu5xmh9.js";import B from"./ForgotPassword-Bdvlvj9-.js";import"./SectionHeader-CzvNZu7G.js";import"./input-CVqtW4nl.js";import"./group-AejWIf7d.js";import"./render-strategy-7eBaZet2.js";function E(a){return j({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9 11.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]}]})(a)}function O(a){return j({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(a)}const k=[{label:"Full Name",type:"text",placeholder:"Osama Ali",name:"fullName"},{label:"Email",type:"email",placeholder:"example@gmail.com",name:"email",autoComplete:"email"},{label:"Phone Number",type:"tel",placeholder:"01234567891",name:"phoneNumber"},{label:"Class Level",type:"select",name:"classLevel",options:I({items:[{label:"Grade 1",value:"Grade 1 Secondary"},{label:"Grade 2",value:"Grade 2 Secondary"},{label:"Grade 3",value:"Grade 3 Secondary"}],itemToString:a=>a.label})}],V=[{label:"Old Password",type:"password",name:"oldPassword"},{label:"New Password",type:"password",name:"newPassword"},{label:"Re-enter new password",type:"password",name:"cpassword"}],w=v({fullName:x().min(1,"Name is required"),email:L,phoneNumber:G,classLevel:x().min(1,"Class level is required")}),z=w.omit({classLevel:!0});function g({authFormProps:a,mutation:l,openModalContent:t,children:s,toggleOriginalForm:o=!0,title:r}){const[n,i]=h.useState(!1),m=d=>{l(d,{onSuccess:()=>{i(!1)}})};return e.jsxs(b,{open:n,setOpen:i,title:r,openModalContent:t,children:[o&&e.jsx(A,{...a,onSubmit:m}),s]})}function q(){const{userData:a}=f(),{mutate:l,isPending:t}=C(a._id),s=()=>{const r=k.filter(n=>!(a?.role==="admin"&&n.name==="classLevel"));return P(r,a)},o={validationSchema:a.role==="admin"?z:w,formFields:s(),submitText:"Update data",loading:t};return e.jsx(g,{authFormProps:o,mutation:l,openModalContent:"Edit data",title:"Update Account Data"})}function R(){const{mutate:a,isPending:l}=y(),[t,s]=h.useState(!0),r={validationSchema:T(v({oldPassword:p,newPassword:p,cpassword:p})),formFields:V,submitText:"Update password",loading:l};return e.jsxs(g,{authFormProps:r,toggleOriginalForm:t,mutation:a,openModalContent:"Change password",title:t&&"Change Current Password",children:[!t&&e.jsx(B,{loggedIn:!0}),e.jsx("div",{className:"flex flex-col gap-2 items-center mt-4 [&>div]:flex [&>div]:items-center",children:t?e.jsxs("div",{children:[e.jsx("h1",{children:"forgot your password?"}),e.jsx(c,{p:0,ml:1,className:"!underline",variant:"plain",onClick:()=>s(n=>!n),children:"reset it"})]}):e.jsxs("div",{children:[e.jsx("h1",{children:"You remember your old password?"}),e.jsx(c,{p:0,ml:1,className:"!underline",variant:"plain",onClick:()=>s(n=>!n),children:"update it"})]})})]})}function Z({createdAt:a}){const{mutate:l}=S(),[t,s]=h.useState(!1),o=()=>{if(a==="2025-09-08T20:39:28.004Z"||a==="2025-09-19T21:34:34.786Z")return D("error","","Not allowed to delete the main acc");l(),s(!1)};return e.jsx("div",{children:e.jsx(b,{open:t,setOpen:s,openBtnClasses:"!text-red-500",openModalContent:"Delete account",title:"Delete account",children:e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsx("p",{className:"text-secondary",children:"Are your sure you want to delete your account?"}),e.jsxs("div",{className:"space-x-4",children:[e.jsx(c,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(c,{variant:"solid",colorPalette:"red",onClick:o,children:"Delete"})]})]})})})}function $(){const{userData:a}=f(),{fullName:l,email:t,role:s,phoneNumber:o,createdAt:r,classLevel:n}=a,i=[{label:"Email",value:t},{label:"Phone",value:o},{label:"Member Since",value:r?new Date(r).toLocaleDateString("en-GB"):null},{label:"Class Level",value:n}];return e.jsxs(M,{children:[e.jsx("h1",{className:"text-2xl font-semibold text-center",children:"My Profile"}),e.jsxs("div",{className:"lg:min-w-3xl min-w-full mx-auto p-20 bg-bg-gray rounded-xl flex flex-col items-center gap-20 relative border border-secondary/50",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-6 text-4xl",children:s==="admin"?e.jsx(O,{}):e.jsx(E,{})}),e.jsx("h1",{className:"text-xl font-bold",children:l}),e.jsx("p",{className:"text-secondary",children:s})]}),e.jsx("div",{className:"w-full grid sm:grid-cols-2 gap-4",children:i.map(({label:m,value:d},N)=>d&&e.jsxs("div",{children:[e.jsxs("h1",{className:"font-semibold text-secondary text-lg",children:[m,":"]}),e.jsx("p",{children:d})]},N))}),e.jsx("div",{className:"top-2 right-2 !absolute",children:e.jsxs(U,{openBtnIcon:e.jsx(F,{}),btnVariant:"outline",children:[e.jsx(u,{asChild:!0,children:e.jsx(q,{})}),e.jsx(u,{asChild:!0,children:e.jsx(R,{})}),e.jsx(u,{asChild:!0,children:e.jsx(Z,{createdAt:r})})]})})]})]})}export{$ as default};
