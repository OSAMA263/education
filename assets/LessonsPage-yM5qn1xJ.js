import{Y as u,j as e,Q as c,Z as x,_ as m,$ as p,r as f,L as j,a0 as g,V as h,a1 as L,a2 as b}from"./index-BJ9f2vcr.js";import{S as P}from"./SectionHeader-CzvNZu7G.js";import{C as v}from"./Card-ClOCw2Zy.js";import{M as y}from"./Modal-CUu5xmh9.js";import"./render-strategy-7eBaZet2.js";function C({lessonId:n,open:t,setOpen:s,children:a}){const{mutate:o,isPending:l}=u(),r=()=>{o(n,{onSuccess:()=>{s(!1)}})};return e.jsxs(e.Fragment,{children:[a,e.jsx(y,{title:"Want to buy this lesson?",openModalContent:"Buy lesson",openBtnClasses:"!rounded-xl",btnVariant:"solid",openBtnIcon:e.jsx(x,{}),open:t,setOpen:s,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{variant:"surface",loading:l,onClick:r,children:"Purchase lessons"}),e.jsx(c,{variant:"outline",colorPalette:"red",onClick:()=>s(!1),children:"Cancle"})]})})]})}function B({data:n}){const{_id:t,title:s,classLevel:a,scheduledDate:o,description:l,isPaid:r,price:i}=n,d=new Date(o).toLocaleString();return e.jsx(v,{description:l,classLevel:a,title:s,availableDate:d,className:"space-y-10 justify-between",children:e.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[e.jsx("h1",{className:"font-semibold text-lg",children:r&&`EGP ${i.toFixed(2)}`}),e.jsx(N,{_id:t,isPaid:r,scheduledDate:o})]})})}const N=({_id:n,isPaid:t,scheduledDate:s})=>{const a=m(s),{error:o,isLoading:l}=p(n,{enabled:a}),[r,i]=f.useState(!1);return o?e.jsx(C,{open:r,setOpen:i,lessonId:n}):e.jsx(c,{colorPalette:t?"blackAlpha":"blue",rounded:"xl",variant:"surface",disabled:!a,loading:l,p:0,children:a?e.jsx(j,{className:"flex justify-center items-center w-full h-full",to:`/lessons/${n}`,children:"Watch lesson"}):"Not available yet"})};function F(){const{data:n,isLoading:t,error:s}=g();return e.jsxs(h,{children:[e.jsx(P,{title:"Lessons",par:"Explore our wide range of courses designed to help you learn and grow."}),t?e.jsx(L,{}):s?e.jsx(b,{message:s}):e.jsx("div",{className:"grid gap-4 [grid-template-columns:repeat(auto-fit,minmax(380px,1fr))]",children:n?.data.map(a=>e.jsx(B,{data:a},a._id))})]})}export{F as default};
